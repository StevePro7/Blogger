require(['jquery','Magento_Ui/js/modal/modal','mage/apply/main','mage/mage','domReady!'],function($,modal,mage){'use strict';var Base={from:"",service:null,webservice:function(callBack){if(Base.service!=null){callBack(Base.service);}
else{require(['Itskills_Learning/libs/qs/service'],function(webservice){Base.service=webservice;callBack(Base.service);});}},html:function(id,from,label){return('<small class="text-muted">'+'<label class="noPadding">'+'<input type="checkbox" checked="checked" id="'+id+'"/>I agree with the <a data-id="onAgreementModal" data-from="'+from+'" href="#">'+label+'.</a>'+'</label>'+'</small><br /><br />');},init:function(){var options={type:'popup',responsive:false,innerScroll:false,modalClass:'custom-block-customer-login',buttons:false,closed:function(){if(!$('.custom-block-customer-register').hasClass('_show')){if($('button.tocart').is('.isAddingToCart')){$('button.tocart').prop('disabled',false);$('button.tocart').removeClass('disabled');$('.table.course-options').removeClass('disabled');}}
if($('button.add-to-cart[type="submit"]').is('.cust-add-to')||$('button.btn-circle[type!="submit"][title="Add To Cart"]').is('.rel-add-to')||$('button.learn_subs[type="submit"]').is('.sub-add-to')||$('button.algo-add-to[type="submit"]').is('.cust-add-to')){$('button.add-to-cart[type="submit"]').removeClass('cust-add-to');$('button.algo-add-to[type="submit"]').removeClass('cust-add-to');$('button.add-to-cart[type="submit"]').parent('form').removeClass('form-add-to');$('button.algo-add-to[type="submit"]').parent('form').removeClass('form-add-to');$('button.btn-circle[type!="submit"][title="Add To Cart"]').removeClass('rel-add-to');$('button.learn_subs[type="submit"]').removeClass('sub-add-to');$('button.learn_subs[type="submit"]').closest('form').removeClass('form-add-to');}
$('.custom-block-customer-register,.custom-block-customer-login').find('form').trigger('reset');},opened:function(){setTimeout(function(){$(".modals-overlay").css("z-index","800");},50);}};$('body').on('click','.tabsWrapper .tabs-list a',function(){$('.tab-content, .tabs-list li').removeClass('active');$(this).parent().addClass('active');$(jQuery(this).attr('href')).addClass('active');});$('body').on('click','.pwd-toggle-btn',function(){var thisPwd=$(this).parent().find('input');if(thisPwd.attr('value')!=""){if(!$(this).hasClass('active')){$(this).text('Hide').addClass('active');thisPwd.attr('type','text');}else{$(this).text('Show').removeClass('active');thisPwd.attr('type','password');}}});modal(options,$('#userCredentialModal'));modal({type:'popup',responsive:false,innerScroll:false,modalClass:'custom-block-customer-register',buttons:false,opened:function(){if(rootBaseObject.captchaEnabled&&!rootBaseObject.captchaRedeclare){var recaptchaScript=document.createElement('script');recaptchaScript.src='https://www.google.com/recaptcha/api.js?onload=captchaOnload&render=explicit';document.body.appendChild(recaptchaScript);rootBaseObject.captchaRedeclare=true;}},closed:function(){if(!$('.custom-block-customer-login').hasClass('_show')){if($('button.tocart').is('.isAddingToCart')){$('button.tocart').prop('disabled',false);$('button.tocart').removeClass('disabled');$('.table.course-options').removeClass('disabled');}
if($('button.add-to-cart[type="submit"]').is('.cust-add-to')||$('button.btn-circle[type!="submit"][title="Add To Cart"]').is('.rel-add-to')||$('button.learn_subs[type="submit"]').is('.sub-add-to')||$('button.algo-add-to[type="submit"]').is('.cust-add-to')){$('button.add-to-cart[type="submit"]').removeClass('cust-add-to');$('button.algo-add-to[type="submit"]').removeClass('cust-add-to');$('button.add-to-cart[type="submit"]').parent('form').removeClass('form-add-to');$('button.algo-add-to[type="submit"]').parent('form').removeClass('form-add-to');$('button.btn-circle[type!="submit"][title="Add To Cart"]').removeClass('rel-add-to');$('button.learn_subs[type="submit"]').removeClass('sub-add-to');$('button.learn_subs[type="submit"]').closest('form').removeClass('form-add-to');}
$('.custom-block-customer-register,.custom-block-customer-login').find('form').trigger('reset');$('#createAnAccount').addClass("btnDisabled");if(typeof grecaptcha!="undefined"){grecaptcha.reset();}}}},$('#userCredentialModal'));if(rootBaseObject.isSocialLoginEnable){$('#userCredentialModal').parent().parent().css('width','600px');}
else{$("#userCredentialModal .create-new-panel").css("width","300px");}
if(rootBaseObject.userTermsOfUse!=false){$("div[data-placeholder=regAggreement]").html(Base.html("formAgreementCheck","register",rootBaseObject.userTermsOfUse['label']));$("div[data-placeholder=loginAggreement]").html(Base.html("loginFormAgreementCheck","login",rootBaseObject.userTermsOfUse['label']));$("a[data-id=onAgreementModal]").on('click',function(){if(!$('.modals-wrapper > .modal-popup.form-agreement-modal').length){modal({type:'popup',modalClass:'dark-head center-head form-agreement-modal',responsive:false,innerScroll:true,buttons:[{text:"Close",class:'action secondary',click:function(){this.closeModal();}},{text:"Accept",class:'action primary',click:function(){if(Base.from=="login"){$("#loginFormAgreementCheck").attr("checked","checked");Login.formSubmission();}
else{$("#formAgreementCheck").attr("checked","checked");Registration.formSubmission();}
this.closeModal();}}]},$('#formAgreementModal'));}
var from=$(this).attr("data-from");Base.openAgreementModal(from);});}},openAgreementModal:function(type){Base.from=type;$("#formAgreementModal").modal("openModal");if($("#formAgreementModal").html()==""){$("#formAgreementModal").parent().parent().addClass("loading");Base.webservice(function(webservice){webservice.call({system:"magentoAPI",type:"POST",data:{"storeId":rootBaseObject.storeId},url:BASE_URL+'rest/default/V1/itskills-helper/toc',mockedObject:{}},function(response){$("#formAgreementModal").html(response[0].result[0].content);$("#formAgreementModal").parent().parent().removeClass("loading");$("#formAgreementModal > div").removeAttr("style");});});}}}
var Registration={init:function(){var submitToMailChimp=false;var trackCookieParam={};var isSubmit=false;var action_taken='Registered';var c_addto=false;var dataForm=$('#form-validate');dataForm.mage('validation',{});var mailChimpForm=$("#forUTMOnReg");$('.header .header.links').find("li:eq(2)").find("a").on('click',function(){$('#userCredentialModal').modal("openModal");return false;});$("#signin-popup").on('click',function(){$('#userCredentialModal').modal("openModal");return false;});fillPlaceholder();if(rootBaseObject.captchaEnabled){window.captchaOnload=function(){grecaptcha.render(document.getElementById("hidden_captcha"),{'sitekey':rootBaseObject.siteKey,'callback':function(token){document.getElementById("mw_invisible_token").setAttribute('value',token);if(submitToMailChimp){mailChimpForm.submit();}
else{registerCustomer();}}});setTimeout(function(){$("iframe[title|='recaptcha challenge']").parent().css("position","fixed");},5000);};}
$('#createAnAccount').addClass("btnDisabled");$('#register-popup-modal .field input').keyup(function(){var empty=false;$('#register-popup-modal .field input').each(function(){if($(this).val().length==0&&$(this).attr('name')!=='u_company'){empty=true;}});if(empty){$('#createAnAccount').addClass("btnDisabled");}
else{$('#createAnAccount').removeClass("btnDisabled");}});$("#createAnAccount").click(function(e){e.preventDefault();Registration.formSubmission();$(window).trigger('resize');});$("#firstname, #lastname").keydown(function(event){var inputValue=event.which;if((inputValue>=48&&inputValue<=57)||(inputValue>=96&&inputValue<=111)){event.preventDefault();}
if((inputValue>=187&&inputValue<=189)||(inputValue==192)){event.preventDefault();}});dataForm.keypress(function(event){if(event.keyCode==13||event.which==13){event.preventDefault();Registration.formSubmission();$(window).trigger('resize');}});mailChimpForm.submit(function(e){registerCustomer();});var dataFormValidateObj={};if(rootBaseObject.dobEnabled){dataFormValidateObj={errorPlacement:function(error,element){if(element.prop('id').search('full')!==-1){var dobElement=$(element).parents('.customer-dob'),errorClass=error.prop('class');error.insertAfter(element.parent());dobElement.find('.validate-custom').addClass(errorClass).after('<div class="'+errorClass+'"></div>');}
else{error.insertAfter(element);}},ignore:':hidden:not('+rootBaseObject.ignore+')'};}
else{dataFormValidateObj={ignore:rootBaseObject.ignore?':hidden:not('+rootBaseObject.ignore+')':':hidden'};}
dataForm.mage('validation',dataFormValidateObj).find('input:text').attr('autocomplete','off');function registerCustomer(){var formData={};var params=$('#form-validate').serializeArray();$.each(params,function(i,val){if(val.name=="u_company"){val.name="user_company";}
else if(val.name=="password"){formData["password_confirmation"]=val.value;}
formData[val.name]=val.value;});$("#userCredentialModal").parent().parent().addClass("loading");Base.webservice(function(webservice){webservice.call({system:"magento",type:"POST",data:formData,url:BASE_URL+'popupsignuplogin/customer/ajaxregister',mockedObject:{mockedData2:{errors:false,formKey:"r9LaG8XxxUxjNlaY",message:"Registration successful.",redirectUrl:"http://127.0.0.1/javascript.html"}}},function(response){$("#userCredentialModal").parent().parent().removeClass("loading");if(typeof response.formKey!="undefined"){var c=document.cookie;var d=c.split(";");var count=0;d.forEach(function(item){item=item.trim();var e=item.split("=");if(e[0]!="undefined"){if(e[0]=="form_key"){count++;}}});if(count==0){$("input[name='form_key']").val(response.formKey);}
if(count==1){var webdomain=$(location).attr('hostname');$.cookie("form_key",null,{path:"/",domain:webdomain});}}
if(typeof(Storage)){var data=localStorage.getItem('skipPersonalize');if(data!=null){localStorage.removeItem('skipPersonalize');}}
if(!response.errors){isSubmit=true;window.location.reload();return true;}
else{return serverValidation(response);}});});return false;}
function serverValidation(response){if(response.errors){isSubmit=false;$('.form-create-account .messages .message div').html(response.message);$('.form-create-account .messages .message').show();$(".form-create-account").contents().find('.message-error').attr("tabindex",-1).focus();$('#createAnAccount').prop('disabled',false);setTimeout(function(){$('.form-create-account .messages .message').hide();},10000);}
return false;}
function popupSubCartForm(btn){var cartForm=$(btn).parent('form');if(cartForm.attr('data-role')=='tocart-form'){$(btn).addClass('cust-add-to');cartForm.addClass('form-add-to');showPopUpReg();}}
function showPopUpReg(){$('#loginAnAccount').text('Checkout');$('#createAnAccount').text('Checkout');$('#userCredentialModal').modal("openModal");if(typeof(Storage)){if(sessionStorage.getItem('recordingStarted')==null){sessionStorage.setItem('recordingStarted',true);window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)};window.hj('tagRecording',['Attempted sign-up from static page']);window.hj('trigger','cta-signup');}}}
function fillPlaceholder(){$('#firstname').attr("placeholder","First Name").focus();$('#lastname').attr("placeholder","Last Name");try{$('#captcha_user_create').attr("placeholder","Type Below Text");}catch(e){}}
Registration.formSubmission=function(){var rc='';var r_name="ranp";var gc='';var c_name="quickstartTraffic";if(document.cookie.length>0){var r_start=document.cookie.indexOf(r_name+"=");if(r_start!=-1){r_start=r_start+r_name.length+1;var r_end=document.cookie.indexOf(";",r_start);if(r_end==-1)r_end=document.cookie.length;rc=unescape(document.cookie.substring(r_start,r_end));if(rc!=""){var rz="";var ry=rc.split('|');for(i=0;i<ry.length;i++){if(ry[i].indexOf('ranmid=')>=0)rz+="&ranmid="+ry[i].substring(ry[i].indexOf('=')+1);if(ry[i].indexOf('ransiteid=')>=0)rz+="&ransiteid="+ry[i].substring(ry[i].indexOf('=')+1);}
rc=rz;}}
var c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;gc=unescape(document.cookie.substring(c_start,c_end));if(gc!=""){var z="";var y=gc.split('|');for(i=0;i<y.length;i++){if(y[i].indexOf('utmcsr=')>=0)z+="&utm_source="+y[i].substring(y[i].indexOf('=')+1);if(y[i].indexOf('utmccn=')>=0)z+="&utm_campaign="+y[i].substring(y[i].indexOf('=')+1);if(y[i].indexOf('utmcmd=')>=0)z+="&utm_medium="+y[i].substring(y[i].indexOf('=')+1);if(y[i].indexOf('utmctr=')>=0)z+="&utm_term="+y[i].substring(y[i].indexOf('=')+1);if(y[i].indexOf('utmcct=')>=0)z+="&utm_content="+y[i].substring(y[i].indexOf('=')+1);}
gc=z;}}
var utmExists=(gc!=""&&typeof gc!="undefined"&&gc!=null);var ranExists=(rc!=""&&typeof rc!="undefined"&&rc!=null);submitToMailChimp=(typeof mailChimpForm.html()!='undefined'&&typeof UTMFormFields!="undefined"&&(ranExists||utmExists));if(submitToMailChimp){trackCookieParam={};if(utmExists){gc=gc.split("&");$.each(gc,function(key,val){var arr=val.split("=");if(val!=""){trackCookieParam[arr[0]]=arr[1];}});}
if(ranExists){rc=rc.split("&");$.each(rc,function(key,val){var arr=val.split("=");if(val!=""){trackCookieParam[arr[0]]=arr[1];}});}
$.each(UTMFormFields,function(key,elmID){if(key=="email"){$(elmID).val($("#email_address").val());}
if(key=="first_name"){$(elmID).val($("#firstname").val());}
if(key=="last_name"){$(elmID).val($("#lastname").val());}
if(key=="phone_number"){$(elmID).val($("#phone_number").val());}
if(key=="company"){$(elmID).val($("#company").val());}
if(key=="host_page_url"){$(elmID).val(window.location.href);}
if(key=="country"){$(elmID).val(rootBaseObject.customerCountry);}
if(key=="brand"){$(elmID).val(rootBaseObject.storeName);}
if(key=="product_purchased"){var prod_name='';if($('button.tocart').hasClass('isAddingToCart')){action_taken='Abandoned Cart';if($('button.tocart.isAddingToCart').attr('data-action')=='subs'){prod_name=$('button#subs-submit-btn').parent('form').find('input[name="product"]').attr('data-title');}else{prod_name=$('#product_addtocart_form').find('input[name="product"]').attr('data-title');}}else if($('button[type="submit"]').hasClass('cust-add-to')){action_taken='Abandoned Cart';prod_name=$('button[type="submit"].cust-add-to').parent('form.form-add-to').closest('.result-wrapper').find('a').attr('title');}else if($('button[type="submit"]').hasClass('sub-add-to')){action_taken='Abandoned Cart';prod_name=$('button[type="submit"].sub-add-to').closest('form.form-add-to').find('input[name="product"]').attr('data-title');}else if($('#createAnAccount').text().toLowerCase()==="preview"){prod_name=$('#product_addtocart_form').find('input[name="product"]').attr('data-title');}
$(elmID).val(prod_name);}
if(key=="action_taken"){var btnText=$('#createAnAccount').text();if(btnText.toLowerCase()==="preview"){action_taken=$('button.action.preview').text();}
$(elmID).val(action_taken);}
if(typeof trackCookieParam[key]!="undefined"){$(elmID).val(trackCookieParam[key]);}});}}
if(dataForm.valid()){if(rootBaseObject.userTermsOfUse!=false){if(!$("#formAgreementCheck").prop("checked")){$("a[data-id=onAgreementModal]").click();return;}}
if(!isSubmit){if(rootBaseObject.captchaEnabled){$("#hidden_captcha").click();isSubmit=true;}
else{registerCustomer();}
$('#createAnAccount').attr('disabled','disabled');}}}}};var Login={init:function(){var dataForm=$('#customer-login-form');dataForm.mage('validation',{});$('.header .header.links').find("li:eq(1)").find("a").on('click',function(){document.cookie='login_redirect=;Path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';$('#createAnAccount').text('Sign Up');$('#loginAnAccount').text('Login');if(!this.hasAttribute('data-post')){$('#userCredentialModal').modal("openModal");return false;}
else{return true;}});$('.header .header.links').find("li:eq(0)").find("a").on('click',function(){$('#createAnAccount').text('Sign Up');$('#loginAnAccount').text('Login');if(!$('.header .header.links').find("li:eq(1)").find("a")[0].hasAttribute('data-post')){document.cookie='login_redirect='+$(this).attr('href')+';Path=/;';$('#userCredentialModal').modal("openModal");return false;}
else{return true;}});$("#signup-popup").on('click',function(){$('#userCredentialModal').modal("openModal");return false;});$("#forgot-your-password").on('click',function(){if(!$('.modals-wrapper > .modal-popup.forgotpassword-modal').length){modal({type:'popup',responsive:false,innerScroll:false,modalClass:'custom-block-customer-login forgotpassword-modal',buttons:false,opened:function(){setTimeout(function(){$(".modals-overlay").css("z-index","800");},50);}},$('#forgotpassword-popup-modal'));}
$('#userCredentialModal').modal("closeModal");$('#forgotpassword-popup-modal .messages .message').hide();$('#forgotpassword-popup-modal').modal("openModal");});$('#loginAnAccount').on('click',function(){if(dataForm.valid()){if(rootBaseObject.userTermsOfUse!=false){if(!$("#loginFormAgreementCheck").prop("checked")){$("a[data-id=onAgreementModal]").click();return false;}}
Login.formSubmission();}
return false;});Login.formSubmission=function(){if(dataForm.validation('isValid')){var formData={};$.each($('#customer-login-form').serializeArray(),function(i,val){if(val.name=="username"||val.name=="password"){formData[val.name]=val.value;}});$("#userCredentialModal").parent().parent().addClass("loading");Base.webservice(function(webservice){webservice.call({system:"magento",type:"POST",data:formData,url:BASE_URL+'popupsignuplogin/customer/ajaxlogin',mockedObject:{mockedData2:{"errors":false,"message":"Login successful.","redirectUrl":"http://127.0.0.1/javascript.html","formKey":"6OjGrq8KZ9UA1YAT"}}},function(response){$("#userCredentialModal").parent().parent().removeClass("loading");if(typeof response.formKey!="undefined"){var c=document.cookie;var d=c.split(";");var count=0;d.forEach(function(item){item=item.trim();var e=item.split("=");if(e[0]!="undefined"){if(e[0]=="form_key"){count++;}}});if(count==0){$("input[name='form_key']").val(response.formKey);}
if(count==1){var webdomain=$(location).attr('hostname');$.cookie("form_key",null,{path:"/",domain:webdomain});}}
if(!response.errors){if(response.isManager){location.href=location.origin+"/manager";}else{location.href=response.redirectUrl;}}
else{$('.form-customer-login .messages .message div').text(response.message);$('.form-customer-login .messages .message').show();setTimeout(function(){$('.form-customer-login .messages .message').hide();},5000);}});});return false;}}}};var Forgot={init:function(){var dataForm=$('#forgotpassword-form-validate');dataForm.mage('validation',{});$('.action-reset-password').on('click',function(){if(dataForm.validation('isValid')){var formData=new FormData($('#forgotpassword-form-validate')[0]);var forgotpasswordparams=$('#forgotpassword-form-validate').serializeArray();$.each(forgotpasswordparams,function(i,val){formData.append(val.name,val.value);});$.ajax({url:BASE_URL+'popupsignuplogin/customer/ajaxforgotpassword',data:formData,processData:false,contentType:false,showLoader:true,type:'POST',dataType:'json',success:function(response){if(!response.errors){if(!$('.modals-wrapper > .modal-popup.forgotpassword-modal-success').length){modal({type:'popup',responsive:false,innerScroll:false,modalClass:'custom-block-customer-login forgotpassword-modal-success',buttons:false},$('#forgotpassword-popup-modal-success'));}
$('#forgotpassword-popup-modal-success .text-muted').html(response.message);$('#forgotpassword-popup-modal-success').modal("openModal");$('#forgotpassword-popup-modal').modal("closeModal");}
else{$('#forgotpassword-popup-modal .messages .message div').html(response.message);$('#forgotpassword-popup-modal .messages .message').show();$("#forgotpassword-popup-modal").contents().find('.message-error').attr("tabindex",-1).focus();setTimeout(function(){$('#forgotpassword-popup-modal').modal("closeModal");},10000);}}});return false;}});$("#forgotpassword-form-validate .go-back").on('click',function(){$('#forgotpassword-popup-modal').modal('closeModal');$('#userCredentialModal').modal("openModal");});}};if($(".authorization-link a").find('.fa-user').length>0){if(typeof rootCommonHtmls!="undefined"){$("script[data-id=rootCommonHtmls]").replaceWith(rootCommonHtmls);rootCommonHtmls=null;mage.apply();}
Base.init();Login.init();Registration.init();Forgot.init();}
if($("body").hasClass("sales-order-print")){$(".order-details-items .actions-toolbar .secondary a").remove();}});